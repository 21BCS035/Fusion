{% extends 'globals/base.html' %}

{% load static %}

{% block title %}
IPR
{% endblock %}

{% block view_projects %}

{% block body %}
   
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == "success" %}
                <div class="ui positive message">
                    <i class="close icon"></i>
                        {{ message.message }}
                </div>  
            {% else %}
                <div class="ui negative message">
                    <i class="close icon"></i>
                    {{ message.message }}
                </div> 
            {% endif %}
        {% endfor %}
    {% endif %}

    <script>
        $('.message .close')
            .on('click', function() {
                $(this)
                    .closest('.message')
                    .transition('fade')
                ;
            });
    </script>
    {% comment %}table for viewing projects!{% endcomment %}

   <div class="ui pointing secondary menu" style="font-size:25px;">
        <label class="{% if mark5 != 1 and mark6 != 1 and mark7 != 1 %}active item{% else %} item {% endif %}" >
            Projects             
        </label>      
    </div>
    

    <style>
        table {
            /* border-collapse: collapse; */
            width: 100%;
        }

        th, td {
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even){background-color: #f2f2f2}

        th {
            background-color: #4CAF50;
            color: white;
        }
        .btn{
             background-color: #007bff;
              color: #fff;
               border: 2px solid white;
               border-radius:10px; 
               padding: 5px 2px ; 
               cursor: pointer;
                width: 50%;
        }
        .btn-disabled{
             background-color:#63c6ff;
              color: #fff;
               border: 2px solid white;
               border-radius:10px; 
               padding: 5px 2px ; 
                cursor: not-allowed;
                width: 50%;
          
        }
    </style>


    <table >
        <tr>
            <th>S.No.</th>
            <th>Project ID</th>
            <th>Project Name</th>
            <th>Project Type</th>
            <th>Sponsored Agency</th>
            <th>Years</th>
            <th>Status</th>
            <th>Fincancial Outlay</th>
            <th>Staff Details</th>
            <th>Project Info</th>
        </tr>

        {% for project in projects %}

        <tr >
            <td>{{forloop.counter}}</td>
            <td>{{project.project_id}}</td>
            <td>{{project.project_name}}</td>
            <td>{{project.project_type}}</td>
            <td>{{project.sponsored_agency}}</td>
            <td>{{project.years}}</td>
            <td>
                {% if project.status == 0 %}
                <div class="description">OnGoing</div>
                {% endif %}
                {% if project.status == 1 %}
                <div class="description">Completed</div>
                {% endif %}
            </td>
            <td>
                {% if project.financial_outlay_status == 0 %}
                <button onclick="window.location='/research_procedures/financial_outlay/{{project.project_id}}'">Add</button>
                {% endif %}
                <button onclick="window.location='/research_procedures/view_financial_outlay/{{project.project_id}}'">View</button>
            </td>
            <td>
                <button onclick="window.location='/research_procedures/add_staff_details/{{project.project_id}}'">Add</button>
                <button onclick="window.location='/research_procedures/view_financial_outlay/{{project.project_id}}'">View</button>
            </td>
            <td>
                <button onclick="window.location='/research_procedures/view_project_info/{{project.project_id}}'">View</button>
            </td>
        </tr>
        {% endfor %}    
    </table>
    
  
{% endblock %}

{% endblock %}