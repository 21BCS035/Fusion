{% extends 'globals/base.html' %}

{% load static %}

{% block title %}
IPR
{% endblock %}

{% block project_info %}

{% block body %}
   
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == "success" %}
                <div class="ui positive message">
                    <i class="close icon"></i>
                        {{ message.message }}
                </div>  
            {% else %}
                <div class="ui negative message">
                    <i class="close icon"></i>
                    {{ message.message }}
                </div> 
            {% endif %}
        {% endfor %}
    {% endif %}

    <script>
        $('.message .close')
            .on('click', function() {
                $(this)
                    .closest('.message')
                    .transition('fade')
                ;
            });
    </script>
    <div class="ui pointing secondary menu" style="font-size: 25px;">
  <label class="{% if mark5 != 1 and mark6 != 1 and mark7 != 1 %}active item{% else %} item {% endif %}">
    &nbsp;<span class="ui blue text header">{{ project.project_name }}</span>
  </label>
</div>


    <style>
        .header{
            font-size:20px;
            padding-top:10px;
        }
        .description{
            padding-top:20px;
            padding-bottom:20px;
        }
        .flexy{
            display:flex;
            width: 100%;
        }
        #width-half{
            width: 50%;
        }
        .ui.small.grey.equal-size-button.button:hover{
        background-color:black;
       }
        .ui.small.equal-size-button.button:hover{
            background-color:#0307fc;
        }
        .ui.small.grey.equal-size-button.button{
        width:80px;
       }
        .ui.small.equal-size-button.button{
            width:80px;
        }
    </style>
    
 <body>
    <div class="ui container" style="margin-bottom:120px;width:800px" >
        <div class="ui segments">
            <div class="ui segment">
                <div class="ui relaxed divided list">
                    
                    
                    <div class="item"  >
                        <div class="flexy">
                            <div class="content" id="width-half"> 
                                <div class="header" >Project Investigator ID</div>
                                <div class="description" >{{ project.project_investigator_id }}</div>
                            </div>
                            <div class="content" id="width-half" > 
                                <div class="header " >Co-Project Investigator ID</div>
                                <div class="description" >{{ project.co_project_investigator_id }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="item" >
                        <div class="flexy">
                        <div class="content" id="width-half">
                            <div class="header" >Project Type</div>
                            <div class="description" >{{ project.project_type }}</div>
                        </div>
                        <div class="content" id="width-half" >
                            <div class="header" >Sponsored Agency</div>
                            <div class="description" >{{ project.sponsored_agency }}</div>
                        </div>
                        </div>
                    </div>

                    <div class="item" >
                        <div class="flexy">
                            <div class="content" id="width-half">
                                <div class="header" >Years</div>
                                <div class="description" >{{ project.years }} years</div>
                            </div>
                            <div class="content" id="width-half" >
                                <div class="header" >Project Status</div>
                                <br>
                                {% if project.status == 0 %}
                                <div class="ui teal label">OnGoing</div>
                                {% endif %}
                                {% if project.status == 1 %}
                                <div class="ui teal label">Completed</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="item" >
                        <div class="flexy">
                        <div class="content" id="width-half">
                            <div class="header" >Start Date</div>
                            <div class="description" >{{ project.start_date }}</div>
                        </div>
                        <div class="content" id="width-half" >
                            <div class="header" >Finish Date</div>
                            <div class="description" >{{ project.finish_date }}</div>
                        </div>
                        </div>
                    </div>

                    <div class="item" >
                        <div class="flexy">
                        <div class="content" id="width-half">
                            <div class="header"  >Financial Outlay</div>
                            <div class="description"  >
                                {% if project.financial_outlay_status == 0 and request.user.extrainfo.user_type == "staff" %}
                                <button id="fhello{{ project.project_id }}" class="ui small grey equal-size-button button"onmouseover="changeText('fhello{{ project.project_id }}')" onmouseout="restoreText('fhello{{ project.project_id }}')" onclick="window.location='/research_procedures/financial_outlay/{{project.project_id}}'"><i class="plus icon"></i></button>
                                {% endif %}
                                {% if project.financial_outlay_status == 0  and request.user.extrainfo.user_type != "staff" %}
                                <div class="ui red label">Not yet added</div>
                                {% endif %}
                                {% if project.financial_outlay_status == 1 %}
                                <button id="vhello{{ project.project_id }}" class="ui small grey equal-size-button button"onmouseover="changeText('vhello{{ project.project_id }}')" onmouseout="restoreText('vhello{{ project.project_id }}')"  onclick="window.location='/research_procedures/view_financial_outlay/{{project.project_id}}'"><i class="eye icon"></i></button>
                                {% endif %}
                            </div>
                        </div>
                        <div class="content " >
                            <div class="header"  >Staff Allotment</div>
                            <div class="description"  >
                                {% if request.user.extrainfo.user_type == "staff" %}
                                <button id="{{ project.project_id }}" class="ui small grey equal-size-button button" onmouseover="changeText({{ project.project_id }})" onmouseout="restoreText({{ project.project_id }})"  onclick="window.location='/research_procedures/add_staff_details/{{ project.project_id }}'"><i class="plus icon"></i></button>
                                {% endif %}
                                <button id="hello{{ project.project_id }}" class="ui small grey equal-size-button button"onmouseover="changeText('hello{{ project.project_id }}')" onmouseout="restoreText('hello{{ project.project_id }}')" onclick="window.location='/research_procedures/view_staff_details/{{project.project_id}}'"><i class="eye icon"></i></button>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="font-size:22px; padding:8px; font-weight:bold"> Request More Staff </div>
            <form class="ui form" action="{% url 'research_procedures:add_staff_request' project.project_id %}"  method="post" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div class="fields" style="margin-left:10px">
                    <div class="four wide field">
                        <label  for="receiver">Select a role:</label>
                        <select id="receiver" name="receiver" class="ui selection dropdown">
                            <option value="ATULK">RSPC Dean</option>
                            <option value="rspc_admin">RSPC Admin</option>
                            <option value="HOD">Department HOD</option>
                            <option value="Director">Director</option>
                        </select>
                    </div>
                    <div class="four wide field">
                        <label  for="file_to_forward">Choose a file:</label>
                        <input type="file" id="file_to_forward" name="file_to_forward" required >
                    </div> 
                    <div class="four wide field">   
                        <br>
                        <input class="submit-button" style="background-color: #007bff; color: #fff;border-radius:5px; border: none; padding: 10px 20px;margin-top:5px; cursor: pointer; width: 100%; transition: background-color 0.3s;"onmouseover="this.style.backgroundColor='#0056b3'" onmouseout="this.style.backgroundColor='#007bff'" type="submit">
                    </div>
                </div>
            </form> 
        </div>
<script>
  function changeText(pid) {
    console.log(pid);
    if(pid[0]=='h'){

        document.getElementById(pid).innerHTML = "View";
    }
    else if(pid[0]=='f')document.getElementById(pid).innerHTML = "Add";
    else if(pid[0]=='v')document.getElementById(pid).innerHTML = "View";
    else document.getElementById(pid).innerHTML = "Add";
  }

  function restoreText(pid) {
    if(pid[0]=='h'){

        document.getElementById(pid).innerHTML = '<i class="eye icon"></i>';
    }
    else if(pid[0]=='f')document.getElementById(pid).innerHTML = '<i class="plus icon"></i>';
    else if(pid[0]=='v')document.getElementById(pid).innerHTML = '<i class="eye icon"></i>';
    else document.getElementById(pid).innerHTML = '<i class="plus icon"></i>';
  }
</script>
</body>

{% endblock %}

{% endblock %}